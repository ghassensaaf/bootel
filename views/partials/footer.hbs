<footer class="pt-3 mt-4 text-muted border-top">
    &copy; Bootel 2021
</footer>
<script>
  function hotelTemplate(hotel) {
    rooms=``;
    $.each(hotel.rooms, function(index, room) {
      roomTypes=[];
      roomFilters=``;
      $.each(room.rates, function(index, rate) {
        roomTypes.push({id:rate.boardCode,board:rate.boardName})
        oldRate=''
        minCancelDate='';
        var rateClass='';
        var availability='';
        if(typeof(rate.cancellationPolicies[0])!=='undefined')
        {
          minCancelDate='annulation gratuite avant le  '+ (parseInt(rate.cancellationPolicies[0].from.split("T")[0].split("-")[2])+1)+'/'+rate.cancellationPolicies[0].from.split("T")[0].split("-")[1]+'/'+rate.cancellationPolicies[0].from.split("T")[0].split("-")[0];
        }
        if(typeof(rate.amountWithoutPromotion) !=='undefined')
        {
          oldRate=rate.amountWithoutPromotion + ' TND'
        }
        occupants=``;
        if(rate.adults===1)
        {
          occupants+= rate.adults +' adulte';
        }
        else
        {
          occupants+= rate.adults +' adultes';
        }
        if(rate.children !== 0)
        {
          if(rate.children===1)
          {
            occupants+=', '+ rate.children +' enfant';
          }
          else
          {
            occupants+=', '+ rate.children +' enfants';
          }
        }
        if(rate.infant !== 0){
          if(rate.infant===1){
            occupants+=', '+ rate.infant +' bébé';
          }
          else{
            occupants+=', '+ rate.infant +' bébés';
          }
        }
        if(rate.rateClass=="NRF"){
          rateClass = `<p class="mb-1"><span class="badge rounded-pill bg-danger"><small>Non Remboursable</small></span></p>`
        }
        if(rate.availability === "R"){
          availability=`<div style="position:absolute;top:0;right:0;" class="badge bg-warning">Sur Demande</div>`
        }
        if(rate.availability === "A"){
          availability=`<div style="position:absolute;top:0;right:0;" class="badge bg-primary">Disponible</div>`
        }
        rooms+=`<div style="position: relative;" class="row py-2 mt-3 border rounded shadow room-card room-${hotel.hotelId} align-items-center"  data-group="${rate.boardCode}">
                  <div class="col-lg-4 col-md-12" style="border-right:1px dashed #33333350">
                    <h6>${rate.rooms}x ${room.name}</h6>
                    <h6>${rate.boardName}</h6>
                    <p><a href="#">Details chambre</a></p>
                  </div>
                  <div class="col-lg-4 col-md-8 h-100" style="height: 100%; border-right:1px dashed #33333350">
                    <p class="fs-6 text-muted mb-1"><i class="fas fa-users"></i> ${occupants}</p>
                    ${rateClass}
                    <p class="text-success fw-bold"><small style="font-size:.75rem;">${minCancelDate}</small></p>
                  </div>
                  <div class="col-lg-2 col-md-4" style="height: 100%; border-right:1px dashed #33333350">
                    <h6 class="text-decoration-line-through text-end">${oldRate}</h6>
                    <h6 class="text-end">${rate.amount} TND</h6>
                    <p class="mb-0 text-end"><small>prix total </small></p>
                    <p class="text-end"><small>2 nuitées</small></p>
                  </div>
                  <div class="col-lg-2 col-md-4">
                    ${availability}
                    <input type="checkbox" id="${rate.rateKey}" name="pensionId" class="room-select" value='${rate.rateKey}' price='${rate.amount}' >
                    <label for="${rate.rateKey}">Selectionnez</label>
                  </div>
                </div>`
        });
      
    });
    $.each(roomTypes, function(index, type) {
      roomFilters+=`
                    <div class="col-4 mb-2 px-1">
                      <input type="radio" class="btn-check room-filter" name="${hotel.hotelId}room-type" id="${hotel.hotelId}-${type.id}"  autocomplete="off" data-set="${type.id}" >
                      <label class="btn btn-outline-secondary border border-1 shadow-sm" style="height:100%; width:100%;" for="${hotel.hotelId}-${type.id}"> <small>${type.board}</small> </label><br>
                    </div>`;
    });
    stars=hotel.rating;
    rating=``;
    for (var i =1; i<=hotel.rating;  i++ ) { 
        rating+=`<i style="color: #FF9529;" class="fas fa-star"></i>`;
    } 
    for (var i =5; i>hotel.rating;  i-- ) { 
        rating+=`<i style="color: #FF9529;" class="far fa-star"></i>`;
    }
    return `{{> hotel}}`;
  }
  function filtersPriceTemplate(filters){
    return `{{> filters/priceFilter}}`;
  }
  function filtersRatingTemplate(rating){
    return `{{> filters/ratingFilter}}`;
  }
  function filtersBoardTemplate(board){
    return `{{> filters/boardFilter}}`;
  }
  function filtersThemeTemplate(theme){
    return `{{> filters/themeFilter}}`;
  }
</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.11.1/bloodhound.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.11.1/typeahead.bundle.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<script type="text/javascript" src="javascripts/plugins/jquery.lazy.min.js"></script>
<script type="text/javascript" src="javascripts/plugins/jquery.lazy.plugins.min.js"></script>
<script type="text/javascript" src="javascripts/searchForm.js"></script>
<script type="text/javascript" src="javascripts/searchResults.js"></script>
<script type="text/javascript" src="javascripts/filters.js"></script>
